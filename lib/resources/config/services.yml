parameters:

    # controller annotation handlers
    conga.controller.rest.annotations.handler.constructor: conga-rest:annotation/controller/handler/rest-controller

    # rest manager
    rest.manager.constructor: conga-rest:rest/manager

    # default REST method mapping
    rest.methods:

        # normal uris
        - { path : '/',    action: 'list', method: 'GET',       name: 'list' }
        - { path : '/:id', action: 'find',    method: 'GET',    name: 'find.one' }     
        - { path : '/',    action: 'create',  method: 'POST',   name: 'create' }
        - { path : '/:id', action: 'update',  method: 'PATCH',  name: 'update' }        
        - { path : '/:id', action: 'remove',  method: 'DELETE', name: 'delete' }

        # resource relationships
        - { path : '/:id/relationships/:attribute', action: 'findRelationship',   method: 'GET',   name: 'relationships.self' }
        - { path : '/:id/relationships/:attribute', action: 'updateRelationship', method: 'PATCH', name: 'relationships.update' }
        - { path : '/:id/:attribute',               action: 'findRelationship',   method: 'GET',   name: 'relationships.related' }

    # REST parameter mapping
    rest.parameters:
        SORT:          sort
        LIMIT:         limit
        SKIP:          skip
        FILTER:        filter
        SPARSE_FIELDS: fields
        INCLUDE:       include

services:

    # handler to process the rest annotations on controllers
    conga.controller.rest.annotations.handler:
        constructor: "%conga.controller.rest.annotations.handler.constructor%"
        tags:
            - { name: controller.annotation.handler, method: handleAnnotations }  
   
    # the REST manager
    rest.manager:
        constructor: "%rest.manager.constructor%"
        tags:
            - { name: kernel.event, event: kernel.compile, method: onKernelCompile, priority: 0 }
